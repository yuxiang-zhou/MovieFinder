# coding=gbk
import sys, json, urllib2, datetime, requests, logging
from bs4 import BeautifulSoup
from pymongo import Connection

reload(sys)
sys.setdefaultencoding('utf-8')

# period = 43200
num_retry = 20

con = Connection()
db = con.moviesdb
cinemas = db.cinemas
latestmovies = db.latestmovies

class MovieGetter:

    movie_url = 'http://www.imdb.com/showtimes/location/UK/W6%207JQ'
    odeon_url = 'http://www.odeon.co.uk/cinemas/'
    cineworld_url = 'http://www.cineworld.co.uk/'
    veu_url = 'http://www.myvue.com/cinemas'

    @staticmethod
    def updateMovies():
        print("Updating Movies")
        req = requests.get(MovieGetter.movie_url)
        html_doc = req.text
        Movies = [] # name, picture, rank
        htmlParser = BeautifulSoup(html_doc)
        MoviesStringList = htmlParser.find_all("div", class_="list_item grid")
        for movie_parse in MoviesStringList:
            movie = {}
            try:
                movie["img"] = movie_parse.img['src']
                movie["name"] = movie_parse.find("div", class_="desc").a.string
                movie["rank"] = movie_parse.find("div", class_="sort").strong.string
                movie["rank"] = movie["rank"].strip()
                Movies.append(movie)
            except:
                pass

        try:
            MovieGetter.store_movies(Movies)
            print("Updating Movies Done")
        except:
            print("Storing Updates Failed")
            pass
        return Movies

    @staticmethod
    def store_movies(movieList):
        for movie in movieList:
            movie_name = movie['name'].replace("'","''")
            time_now = datetime.datetime.now()
            results = latestmovies.find_one({"name":movie_name})
            if results == None:
                latestmovies.insert({
                    "name":movie_name,
                    "img_url":movie['img'],
                    "rank":movie['rank'],
                    "update_at":time_now})
            else:
                latestmovies.update({'_id':results['_id']},
                    {'$set':{'update_at': time_now}},
                    upsert=False, multi=False)


    @staticmethod
    def updateCinemas():
        # odeon movie request :http://www.odeon.co.uk/showtimes/day/181/?date=2014-07-13&siteId=181&type=DAY
        # vue: http://www.myvue.com/latest-movies/cinema/accrington/view/all-times
        # vue: http://www.myvue.com/cinemas/about-vue-cinemas/cinema/aberdeen

        for cinema in cinemas.find():
            cinemaInfo = None # {movies:[],location:{},price:30,price_url:""}
            if cinema['type'] == "odeon":
                cinemaInfo = parseCinemaOdeon(cinema['info_url'])
            elif cinema['type'] == "cineworld":
                cinemaInfo = parseCinemaCineworld(cinema['info_url'])
            elif cinema['type'] == "vue":
                cinemaInfo = parseCinemaVue(cinema['info_url'])
            else:
                print("Unknown Cinema")
                continue

            cinemas.update({'_id':cinema['_id']},
                    {'$set':{'movies': cinemaInfo['movies']}},
                    upsert=False, multi=False)

        
        # logging.debug("-----------------------------------------")
        return

    @staticmethod
    def buildCinemaDB():
        print("Building Cinema DB")
        CinemaList = []
        logging.basicConfig(filename='sys.log',level=logging.DEBUG)

        # inner functions
        def parseOdeon():
            reqOdeon = requests.get(MovieGetter.odeon_url)
            htmlParser = BeautifulSoup(reqOdeon.text)
            odeonCinemaParse = htmlParser.find('select', id="your-cinema").select('option')
            OdeonCinemaList = []

            for odeonCinema in odeonCinemaParse:
                try:
                    cinema = {}
                    cinema['name'] = odeonCinema.string
                    cinema['name'] = cinema['name'].strip()
                    if len(cinema['name']) > 0 and cinema['name'][:6] != 'Select':
                        cinema['url'] = MovieGetter.odeon_url + 'requests/' + odeonCinema['value']
                        cinema['type'] = 'odeon'
                        cinema['movies'] = []
                        cinema['location'] = {}
                        cinema['price'] = {}
                        OdeonCinemaList.append(cinema)
                except:
                    pass
            return OdeonCinemaList

        def parseCineWorld():
            htmlParser = BeautifulSoup('<select id="cinema_cw-1405183562-fcf28cca-7ee1-4ee1-adc1-3e7bce8036f1" aria-=""><option value="">Please select</option><option value="1">Aberdeen - Queens Links</option><option value="78">Aberdeen - Union Square</option><option value="87">Aldershot</option><option value="12">Ashford</option><option value="23">Ashton-under-Lyne</option><option value="34">Bedford</option><option value="56">Birmingham</option><option value="67">Boldon Tyne and Wear</option><option value="72">Bolton</option><option value="73">Bradford</option><option value="2">Braintree</option><option value="3">Brighton</option><option value="4">Bristol</option><option value="5">Burton upon Trent</option><option value="6">Bury St. Edmunds</option><option value="7">Cambridge</option><option value="8">Cardiff</option><option value="9">Castleford</option><option value="11">Cheltenham</option><option value="14">Chesterfield</option><option value="15">Chichester</option><option value="16">Crawley</option><option value="17">Didcot</option><option value="18">Didsbury</option><option value="19">Dundee</option><option value="20">Eastbourne</option><option value="21">Edinburgh</option><option value="24">Falkirk</option><option value="88">Glasgow - IMAX at GSC</option><option value="27">Glasgow - Parkhead</option><option value="28">Glasgow - Renfrew Street</option><option value="90">Gloucester Quays</option><option value="31">Harlow</option><option value="76">Haverhill</option><option value="33">High Wycombe</option><option value="35">Hull</option><option value="36">Huntingdon</option><option value="38">Ipswich</option><option value="39">Isle Of Wight</option><option value="40">Jersey</option><option value="83">Leigh</option><option value="41">Liverpool</option><option value="42">Llandudno</option><option value="45">London - Bexleyheath</option><option value="10">London - Chelsea</option><option value="22">London - Enfield</option><option value="25">London - Feltham</option><option value="26">London - Fulham Road</option><option value="30">London - Hammersmith</option><option value="32">London - Haymarket</option><option value="37">London - Ilford</option><option value="53">London - Shaftesbury Avenue</option><option value="60">London - Staples Corner</option><option value="79">London - The O2, Greenwich </option><option value="65">London - Wandsworth</option><option value="89">London - Wembley</option><option value="66">London - West India Quay</option><option value="70">London - Wood Green</option><option value="43">Luton</option><option value="44">Middlesbrough</option><option value="46">Milton Keynes</option><option value="47">Newport Wales</option><option value="48">Northampton</option><option value="49">Nottingham</option><option value="50">Rochester</option><option value="51">Rugby</option><option value="52">Runcorn</option><option value="54">Sheffield</option><option value="55">Shrewsbury</option><option value="57">Solihull</option><option value="58">Southampton</option><option value="59">St Helens</option><option value="91">St Neots</option><option value="61">Stevenage</option><option value="62">Stockport</option><option value="63">Swindon</option><option value="64">Wakefield</option><option value="68">Weymouth</option><option value="77">Witney</option><option value="69">Wolverhampton</option><option value="71">Yeovil</option></select>')
            CineWorldCinemaParse = htmlParser.select('option')
            CineWorldCinemaList = []
            for CineWorldCinema in CineWorldCinemaParse:
                try:
                    cinema = {}
                    cinema['name'] = CineWorldCinema.string
                    cinema['name'] = cinema['name'].strip()
                    if len(cinema['name']) > 0 and cinema['name'][:6] != 'Please':
                        cinema['url'] = MovieGetter.cineworld_url + 'whatson?sort=default&cinema=' + CineWorldCinema['value']
                        cinema['type'] = 'cineworld'
                        cinema['movies'] = []
                        cinema['location'] = {}
                        cinema['price'] = {}
                        CineWorldCinemaList.append(cinema)
                except:
                    pass
            return CineWorldCinemaList

        def parseVue():
            VeuCinemaParse = [{"markerText": "Vue Aberdeen", "lat": 57.147407, "lng": -2.094701, "infoText": "<div class='infoWindowContainer'><div class='infoWindowHeader'><h1>Vue Aberdeen</h1></div><div class='infoWindowImage'><img src='/images/cinemas/aberdeen.jpg' alt='' /></div><div class='infoWindowContent'><p>Lighthouse Cinema<br />10 Ship Row<br />Aberdeen<br />AB11 5BW</p><p>08712 240 240</p><p>7 screens</p></div><div class='infoWindowLinks'><a href='http://www.myvue.com/cinemas/about-vue-cinemas/cinema/aberdeen'>Go to cinema</a></div>", "markerType": 0},{"markerText": "Vue Accrington", "lat": 53.75265, "lng": -2.37008, "infoText": "<div class='infoWindowContainer'><div class='infoWindowHeader'><h1>Vue Accrington</h1></div><div class='infoWindowImage'><img src='' alt='' /></div><div class='infoWindowContent'><p>The Viaduct<br />Hyndburn Road<br />Accrington<br />BB5 1QF</p><p>08712 240 240</p><p>4 screens</p></div><div class='infoWindowLinks'><a href='http://www.myvue.com/cinemas/about-vue-cinemas/cinema/accrington'>Go to cinema</a></div>", "markerType": 0},{"markerText": "Vue Acton", "lat": 51.52571, "lng": -0.28137, "infoText": "<div class='infoWindowContainer'><div class='infoWindowHeader'><h1>Vue Acton</h1></div><div class='infoWindowImage'><img src='' alt='' /></div><div class='infoWindowContent'><p>Royale Leisure Park<br />Western Avenue, Park Royal South<br />London<br />W3 0PA</p><p>08712 240 240</p><p>9 screens</p></div><div class='infoWindowLinks'><a href='http://www.myvue.com/cinemas/about-vue-cinemas/cinema/acton'>Go to cinema</a></div>", "markerType": 0},{"markerText": "Vue Altrincham", "lat": 53.3853645324707, "lng": -2.34940600395203, "infoText": "<div class='infoWindowContainer'><div class='infoWindowHeader'><h1>Vue Altrincham</h1></div><div class='infoWindowImage'><img src='' alt='' /></div><div class='infoWindowContent'><p>Denmark Street<br />Altrincham<br />WA14 2WG</p><p>08712 240 240</p><p>6 screens</p></div><div class='infoWindowLinks'><a href='http://www.myvue.com/cinemas/about-vue-cinemas/cinema/altrincham'>Go to cinema</a></div>", "markerType": 0},{"markerText": "Vue Barrow", "lat": 54.1147727966309, "lng": -3.23852109909058, "infoText": "<div class='infoWindowContainer'><div class='infoWindowHeader'><h1>Vue Barrow</h1></div><div class='infoWindowImage'><img src='' alt='' /></div><div class='infoWindowContent'><p>Hollywood Park<br />Hindpool Road<br />Barrow-in-Furness<br />LA14 2NA</p><p>08712 240 240</p><p>7 screens</p></div><div class='infoWindowLinks'><a href='http://www.myvue.com/cinemas/about-vue-cinemas/cinema/barrow'>Go to cinema</a></div>", "markerType": 0},{"markerText": "Vue Basingstoke Festival Place", "lat": 51.26551, "lng": -1.08446, "infoText": "<div class='infoWindowContainer'><div class='infoWindowHeader'><h1>Vue Basingstoke Festival Place</h1></div><div class='infoWindowImage'><img src='' alt='' /></div><div class='infoWindowContent'><p>Festival Place<br />New Market Square<br />Basingstoke<br />RG21 7BB</p><p>08712 240 240</p><p>10 screens</p></div><div class='infoWindowLinks'><a href='http://www.myvue.com/cinemas/about-vue-cinemas/cinema/basingstoke-festival-place'>Go to cinema</a></div>", "markerType": 0},{"markerText": "Vue Bicester", "lat": 51.904814, "lng": -1.14932, "infoText": "<div class='infoWindowContainer'><div class='infoWindowHeader'><h1>Vue Bicester</h1></div><div class='infoWindowImage'><img src='' alt='' /></div><div class='infoWindowContent'><p>Pioneer Centre<br />Bure Place<br />Bicester<br />OX26 6FA</p><p>08712 240 240</p><p>8 screens</p></div><div class='infoWindowLinks'><a href='http://www.myvue.com/cinemas/about-vue-cinemas/cinema/bicester'>Go to cinema</a></div>", "markerType": 0},{"markerText": "Vue Birkenhead", "lat": 53.3925, "lng": -3.02214, "infoText": "<div class='infoWindowContainer'><div class='infoWindowHeader'><h1>Vue Birkenhead</h1></div><div class='infoWindowImage'><img src='' alt='' /></div><div class='infoWindowContent'><p>Europa Boulevard<br />Conway Park<br />Birkenhead<br />CH41 4PE</p><p>08712 240 240</p><p>7 screens</p></div><div class='infoWindowLinks'><a href='http://www.myvue.com/cinemas/about-vue-cinemas/cinema/birkenhead'>Go to cinema</a></div>", "markerType": 0},{"markerText": "Vue Birmingham", "lat": 52.50125, "lng": -1.85815, "infoText": "<div class='infoWindowContainer'><div class='infoWindowHeader'><h1>Vue Birmingham</h1></div><div class='infoWindowImage'><img src='' alt='' /></div><div class='infoWindowContent'><p>Star City - Unit 29<br />Watson Road<br />Birmingham<br />B7 5SA</p><p>08712 240 240</p><p>25 screens</p></div><div class='infoWindowLinks'><a href='http://www.myvue.com/cinemas/about-vue-cinemas/cinema/birmingham'>Go to cinema</a></div>", "markerType": 0},{"markerText": "Vue Blackburn", "lat": 53.74393, "lng": -2.4787, "infoText": "<div class='infoWindowContainer'><div class='infoWindowHeader'><h1>Vue Blackburn</h1></div><div class='infoWindowImage'><img src='' alt='' /></div><div class='infoWindowContent'><p>Peel Leisure and Retail Park<br />Lower Audley Street<br />Blackburn<br />BB1 1DG</p><p>08712 240 240</p><p>10 screens</p></div><div class='infoWindowLinks'><a href='http://www.myvue.com/cinemas/about-vue-cinemas/cinema/blackburn'>Go to cinema</a></div>", "markerType": 0},{"markerText": "Vue Bolton", "lat": 53.58333, "lng": -2.53475, "infoText": "<div class='infoWindowContainer'><div class='infoWindowHeader'><h1>Vue Bolton</h1></div><div class='infoWindowImage'><img src='' alt='' /></div><div class='infoWindowContent'><p>Middlebrook Leisure Park <br />The Link Way (Off Mansel Way)<br />Bolton<br />BL6 6HJ </p><p>08712 240 240</p><p>12 screens</p></div><div class='infoWindowLinks'><a href='http://www.myvue.com/cinemas/about-vue-cinemas/cinema/bolton'>Go to cinema</a></div>", "markerType": 0},{"markerText": "Vue Bristol Cribbs Causeway", "lat": 51.52305, "lng": -2.60355, "infoText": "<div class='infoWindowContainer'><div class='infoWindowHeader'><h1>Vue Bristol Cribbs Causeway</h1></div><div class='infoWindowImage'><img src='' alt='' /></div><div class='infoWindowContent'><p>The Venue, Cribbs Causeway<br />Merlin Road<br />Bristol<br />BS10 7SR</p><p>08712 240 240</p><p>12 screens</p></div><div class='infoWindowLinks'><a href='http://www.myvue.com/cinemas/about-vue-cinemas/cinema/bristol-cribbs-causeway'>Go to cinema</a></div>", "markerType": 0},{"markerText": "Vue Bristol Longwell Green", "lat": 51.44968, "lng": -2.49918, "infoText": "<div class='infoWindowContainer'><div class='infoWindowHeader'><h1>Vue Bristol Longwell Green</h1></div><div class='infoWindowImage'><img src='' alt='' /></div><div class='infoWindowContent'><p>Aspects Leisure Park - Unit 2<br />Avon Ring Road, Longwell Green<br />Bristol<br />BS15 9LA</p><p>08712 240 240</p><p>13 screens</p></div><div class='infoWindowLinks'><a href='http://www.myvue.com/cinemas/about-vue-cinemas/cinema/bristol-longwell-green'>Go to cinema</a></div>", "markerType": 0},{"markerText": "Vue Bury The Rock", "lat": 53.594033, "lng": -2.296314, "infoText": "<div class='infoWindowContainer'><div class='infoWindowHeader'><h1>Vue Bury The Rock</h1></div><div class='infoWindowImage'><img src='' alt='' /></div><div class='infoWindowContent'><p>Vue Cinema<br />9 Rock PLace<br />Bury<br />BL9 0YB</p><p>08712 240 240</p><p>10 screens</p></div><div class='infoWindowLinks'><a href='http://www.myvue.com/cinemas/about-vue-cinemas/cinema/bury-the-rock'>Go to cinema</a></div>", "markerType": 0},{"markerText": "Vue Camberley", "lat": 51.33841, "lng": -0.74847, "infoText": "<div class='infoWindowContainer'><div class='infoWindowHeader'><h1>Vue Camberley</h1></div><div class='infoWindowImage'><img src='' alt='' /></div><div class='infoWindowContent'><p>The Atrium<br />Park Street<br />Camberley<br />GU15 3PL</p><p>08712 240 240</p><p>9 screens</p></div><div class='infoWindowLinks'><a href='http://www.myvue.com/cinemas/about-vue-cinemas/cinema/camberley'>Go to cinema</a></div>", "markerType": 0},{"markerText": "Vue Cambridge", "lat": 52.2066, "lng": 0.13327, "infoText": "<div class='infoWindowContainer'><div class='infoWindowHeader'><h1>Vue Cambridge</h1></div><div class='infoWindowImage'><img src='' alt='' /></div><div class='infoWindowContent'><p>The Grafton Centre<br />East Road<br />Cambridge<br />CB1 1PS</p><p>08712 240 240</p><p>8 screens</p></div><div class='infoWindowLinks'><a href='http://www.myvue.com/cinemas/about-vue-cinemas/cinema/cambridge'>Go to cinema</a></div>", "markerType": 0},{"markerText": "Vue Cardiff", "lat": 51.47683, "lng": -3.18145, "infoText": "<div class='infoWindowContainer'><div class='infoWindowHeader'><h1>Vue Cardiff</h1></div><div class='infoWindowImage'><img src='' alt='' /></div><div class='infoWindowContent'><p>Stadium Plaza<br />Wood Street<br />Cardiff<br />CF10 1LA</p><p>08712 240 240</p><p>13 screens</p></div><div class='infoWindowLinks'><a href='http://www.myvue.com/cinemas/about-vue-cinemas/cinema/cardiff'>Go to cinema</a></div>", "markerType": 0},{"markerText": "Vue Carlisle", "lat": 54.89089, "lng": -2.93145, "infoText": "<div class='infoWindowContainer'><div class='infoWindowHeader'><h1>Vue Carlisle</h1></div><div class='infoWindowImage'><img src='' alt='' /></div><div class='infoWindowContent'><p>50 Botchergate<br />Carlisle<br />CA1 1QS</p><p>08712 240 240</p><p>7 screens</p></div><div class='infoWindowLinks'><a href='http://www.myvue.com/cinemas/about-vue-cinemas/cinema/carlisle'>Go to cinema</a></div>", "markerType": 0},{"markerText": "Vue Carmarthen", "lat": 51.858487, "lng": -4.308998, "infoText": "<div class='infoWindowContainer'><div class='infoWindowHeader'><h1>Vue Carmarthen</h1></div><div class='infoWindowImage'><img src='' alt='' /></div><div class='infoWindowContent'><p>Unit B<br />St Catherine's Walk<br />Carmarthen<br />SA31 1GA</p><p>08712 240 240</p><p>6 screens</p></div><div class='infoWindowLinks'><a href='http://www.myvue.com/cinemas/about-vue-cinemas/cinema/carmarthen'>Go to cinema</a></div>", "markerType": 0},{"markerText": "Vue Cheshire Oaks", "lat": 53.26471, "lng": -2.88613, "infoText": "<div class='infoWindowContainer'><div class='infoWindowHeader'><h1>Vue Cheshire Oaks</h1></div><div class='infoWindowImage'><img src='' alt='' /></div><div class='infoWindowContent'><p>Stanney Lane<br />Ellesmere Port<br />South Wirral<br />CH65 9HD</p><p>08712 240 240</p><p>16 screens</p></div><div class='infoWindowLinks'><a href='http://www.myvue.com/cinemas/about-vue-cinemas/cinema/cheshire-oaks'>Go to cinema</a></div>", "markerType": 0},{"markerText": "Vue Cleveleys", "lat": 53.8831, "lng": -3.0465, "infoText": "<div class='infoWindowContainer'><div class='infoWindowHeader'><h1>Vue Cleveleys</h1></div><div class='infoWindowImage'><img src='' alt='' /></div><div class='infoWindowContent'><p>North Prominade<br />Thornton-Cleveleys<br />Lancashire<br />FY5 1DB</p><p>08712 240 240</p><p>8 screens</p></div><div class='infoWindowLinks'><a href='http://www.myvue.com/cinemas/about-vue-cinemas/cinema/cleveleys'>Go to cinema</a></div>", "markerType": 0},{"markerText": "Vue Cramlington", "lat": 55.085204, "lng": -1.590114, "infoText": "<div class='infoWindowContainer'><div class='infoWindowHeader'><h1>Vue Cramlington</h1></div><div class='infoWindowImage'><img src='' alt='' /></div><div class='infoWindowContent'><p>Manor Walks<br />Cramlington<br />NE23 6UT</p><p>08712 240 240</p><p>10 screens</p></div><div class='infoWindowLinks'><a href='http://www.myvue.com/cinemas/about-vue-cinemas/cinema/cramlington'>Go to cinema</a></div>", "markerType": 0},{"markerText": "Vue Croydon Grant's", "lat": 51.37296, "lng": -0.10106, "infoText": "<div class='infoWindowContainer'><div class='infoWindowHeader'><h1>Vue Croydon Grant's</h1></div><div class='infoWindowImage'><img src='' alt='' /></div><div class='infoWindowContent'><p>14 High Street<br />Croydon<br />Surrey<br />CR0 1GT</p><p>08712 240 240</p><p>10 screens</p></div><div class='infoWindowLinks'><a href='http://www.myvue.com/cinemas/about-vue-cinemas/cinema/croydon-grants'>Go to cinema</a></div>", "markerType": 0},{"markerText": "Vue Croydon Purley Way", "lat": 51.37868, "lng": -0.12492, "infoText": "<div class='infoWindowContainer'><div class='infoWindowHeader'><h1>Vue Croydon Purley Way</h1></div><div class='infoWindowImage'><img src='' alt='' /></div><div class='infoWindowContent'><p>Valley Park Leisure Complex<br />21 Hesterman Way<br />Croydon, Surrey<br />CR0 4YA</p><p>08712 240 240</p><p>8 screens</p></div><div class='infoWindowLinks'><a href='http://www.myvue.com/cinemas/about-vue-cinemas/cinema/croydon-purley-way'>Go to cinema</a></div>", "markerType": 0},{"markerText": "Vue Cwmbran", "lat": 51.65529, "lng": -3.01955, "infoText": "<div class='infoWindowContainer'><div class='infoWindowHeader'><h1>Vue Cwmbran</h1></div><div class='infoWindowImage'><img src='' alt='' /></div><div class='infoWindowContent'><p>Glyndwr Road<br />Cwmbran<br />Gwent<br />NP44 1QS</p><p>08712 240 240</p><p>8 screens</p></div><div class='infoWindowLinks'><a href='http://www.myvue.com/cinemas/about-vue-cinemas/cinema/cwmbran'>Go to cinema</a></div>", "markerType": 0},{"markerText": "Vue Dagenham", "lat": 51.53256, "lng": 0.13581, "infoText": "<div class='infoWindowContainer'><div class='infoWindowHeader'><h1>Vue Dagenham</h1></div><div class='infoWindowImage'><img src='' alt='' /></div><div class='infoWindowContent'><p>Dagenham Leisure Park<br />Cook Road<br />Dagenham, Essex<br />RM9 6UQ</p><p>08712 240 240</p><p>7 screens</p></div><div class='infoWindowLinks'><a href='http://www.myvue.com/cinemas/about-vue-cinemas/cinema/dagenham'>Go to cinema</a></div>", "markerType": 0},{"markerText": "Vue Doncaster", "lat": 53.51548, "lng": -1.09941, "infoText": "<div class='infoWindowContainer'><div class='infoWindowHeader'><h1>Vue Doncaster</h1></div><div class='infoWindowImage'><img src='' alt='' /></div><div class='infoWindowContent'><p>Doncaster Leisure Park<br />Herten Way, Bawtry Road<br />Doncaster<br />DN4 7NW</p><p>08712 240 240</p><p>7 screens</p></div><div class='infoWindowLinks'><a href='http://www.myvue.com/cinemas/about-vue-cinemas/cinema/doncaster'>Go to cinema</a></div>", "markerType": 0},{"markerText": "Vue Dublin", "lat": 53.3521, "lng": -6.3944, "infoText": "<div class='infoWindowContainer'><div class='infoWindowHeader'><h1>Vue Dublin</h1></div><div class='infoWindowImage'><img src='' alt='' /></div><div class='infoWindowContent'><p>Liffey Valley Shopping Centre, Fonthill Road, Clondalkin<br />Dublin 22<br />Ireland<br />none</p><p>1520 501 000*</p><p>14 screens</p></div><div class='infoWindowLinks'><a href='http://www.myvue.com/cinemas/about-vue-cinemas/cinema/dublin'>Go to cinema</a></div>", "markerType": 0},{"markerText": "Vue Eastleigh", "lat": 50.96678, "lng": -1.35387, "infoText": "<div class='infoWindowContainer'><div class='infoWindowHeader'><h1>Vue Eastleigh</h1></div><div class='infoWindowImage'><img src='' alt='' /></div><div class='infoWindowContent'><p>Swan Centre<br />Wells Place<br />Eastleigh, Hampshire<br />SO50 5SF</p><p>08712 240 240</p><p>9 screens</p></div><div class='infoWindowLinks'><a href='http://www.myvue.com/cinemas/about-vue-cinemas/cinema/eastleigh'>Go to cinema</a></div>", "markerType": 0},{"markerText": "Vue Edinburgh Ocean Terminal", "lat": 55.98144, "lng": -3.17697, "infoText": "<div class='infoWindowContainer'><div class='infoWindowHeader'><h1>Vue Edinburgh Ocean Terminal</h1></div><div class='infoWindowImage'><img src='' alt='' /></div><div class='infoWindowContent'><p>Ocean Terminal,  Ocean Drive,  Ocean Drive<br />Victoria Dock. Leith<br />Edinburgh<br />EH6 6JJ</p><p>08712 240 240</p><p>12 screens</p></div><div class='infoWindowLinks'><a href='http://www.myvue.com/cinemas/about-vue-cinemas/cinema/edinburgh-ocean-terminal'>Go to cinema</a></div>", "markerType": 0},{"markerText": "Vue Edinburgh Omni Centre", "lat": 55.95703, "lng": -3.18502, "infoText": "<div class='infoWindowContainer'><div class='infoWindowHeader'><h1>Vue Edinburgh Omni Centre</h1></div><div class='infoWindowImage'><img src='' alt='' /></div><div class='infoWindowContent'><p>Omni Leisure Building, Greenside Place<br />61/11 Leith Street<br />Edinburgh<br />EH1 3AU</p><p>08712 240 240</p><p>12 screens</p></div><div class='infoWindowLinks'><a href='http://www.myvue.com/cinemas/about-vue-cinemas/cinema/edinburgh-omni-centre'>Go to cinema</a></div>", "markerType": 0},{"markerText": "Vue Exeter", "lat": 50.7261, "lng": -3.5237, "infoText": "<div class='infoWindowContainer'><div class='infoWindowHeader'><h1>Vue Exeter</h1></div><div class='infoWindowImage'><img src='' alt='' /></div><div class='infoWindowContent'><p>Summerland Gate<br />Cheeke Street<br />Exeter<br />EX1 2DD</p><p>08712 240 240</p><p>7 screens</p></div><div class='infoWindowLinks'><a href='http://www.myvue.com/cinemas/about-vue-cinemas/cinema/exeter'>Go to cinema</a></div>", "markerType": 0},{"markerText": "Vue Finchley Road (O2 Centre)", "lat": 51.547954, "lng": -0.181415, "infoText": "<div class='infoWindowContainer'><div class='infoWindowHeader'><h1>Vue Finchley Road (O2 Centre)</h1></div><div class='infoWindowImage'><img src='' alt='' /></div><div class='infoWindowContent'><p>O2 Centre<br />255 Finchley Road<br />London<br />NW3 6LU</p><p>08712 240 240</p><p>8 screens</p></div><div class='infoWindowLinks'><a href='http://www.myvue.com/cinemas/about-vue-cinemas/cinema/finchley-road-o2-centre'>Go to cinema</a></div>", "markerType": 0},{"markerText": "Vue Fulham Broadway", "lat": 51.48055, "lng": -0.1944, "infoText": "<div class='infoWindowContainer'><div class='infoWindowHeader'><h1>Vue Fulham Broadway</h1></div><div class='infoWindowImage'><img src='' alt='' /></div><div class='infoWindowContent'><p>Fulham Broadway Retail Centre<br />Fulham Road<br />London<br />SW6 1BW </p><p>08712 240 240</p><p>9 screens</p></div><div class='infoWindowLinks'><a href='http://www.myvue.com/cinemas/about-vue-cinemas/cinema/fulham-broadway'>Go to cinema</a></div>", "markerType": 0},{"markerText": "Vue Gateshead Trinity Square", "lat": 54.9626999, "lng": -1.6022, "infoText": "<div class='infoWindowContainer'><div class='infoWindowHeader'><h1>Vue Gateshead Trinity Square</h1></div><div class='infoWindowImage'><img src='' alt='' /></div><div class='infoWindowContent'><p>Trinity Square<br />Gateshead <br />Tyne and Wear<br />NE8 1AG</p><p>08712 240 240</p><p>9 screens</p></div><div class='infoWindowLinks'><a href='http://www.myvue.com/cinemas/about-vue-cinemas/cinema/gateshead'>Go to cinema</a></div>", "markerType": 0},{"markerText": "Vue Glasgow Fort", "lat": 55.871338, "lng": -4.134936, "infoText": "<div class='infoWindowContainer'><div class='infoWindowHeader'><h1>Vue Glasgow Fort</h1></div><div class='infoWindowImage'><img src='' alt='' /></div><div class='infoWindowContent'><p>Glasgow Fort Shopping Park<br />Junction 10 M8<br />Glasgow<br />G34 9DL</p><p>08712 240 240</p><p>1 screens</p></div><div class='infoWindowLinks'><a href='http://www.myvue.com/cinemas/about-vue-cinemas/cinema/glasgow-fort'>Go to cinema</a></div>", "markerType": 0},{"markerText": "Vue Halifax", "lat": 53.724082, "lng": -1.862244, "infoText": "<div class='infoWindowContainer'><div class='infoWindowHeader'><h1>Vue Halifax</h1></div><div class='infoWindowImage'><img src='' alt='' /></div><div class='infoWindowContent'><p>6 Broad Street<br />Halifax<br />HX1 1UX</p><p></p><p>9 screens</p></div><div class='infoWindowLinks'><a href='http://www.myvue.com/cinemas/about-vue-cinemas/cinema/halifax'>Go to cinema</a></div>", "markerType": 0},{"markerText": "Vue Hamilton", "lat": 55.77845, "lng": -4.02934, "infoText": "<div class='infoWindowContainer'><div class='infoWindowHeader'><h1>Vue Hamilton</h1></div><div class='infoWindowImage'><img src='' alt='' /></div><div class='infoWindowContent'><p>Palace Towers<br />Palace Grounds Road<br />Hamilton<br />ML3 6AD</p><p>08712 240 240</p><p>9 screens</p></div><div class='infoWindowLinks'><a href='http://www.myvue.com/cinemas/about-vue-cinemas/cinema/hamilton'>Go to cinema</a></div>", "markerType": 0},{"markerText": "Vue Harrow", "lat": 51.58145, "lng": -0.33882, "infoText": "<div class='infoWindowContainer'><div class='infoWindowHeader'><h1>Vue Harrow</h1></div><div class='infoWindowImage'><img src='' alt='' /></div><div class='infoWindowContent'><p>St George's Shopping & Leisure Centre<br />St Anne's Road<br />Harrow<br />HA1 1HS</p><p>08712 240 240</p><p>9 screens</p></div><div class='infoWindowLinks'><a href='http://www.myvue.com/cinemas/about-vue-cinemas/cinema/harrow'>Go to cinema</a></div>", "markerType": 0},{"markerText": "Vue Hartlepool", "lat": 54.68729, "lng": -1.20735, "infoText": "<div class='infoWindowContainer'><div class='infoWindowHeader'><h1>Vue Hartlepool</h1></div><div class='infoWindowImage'><img src='' alt='' /></div><div class='infoWindowContent'><p>The Lanyard<br />Marina Way<br />Hartlepool<br />TS24 0XS</p><p>08712 240 240</p><p>7 screens</p></div><div class='infoWindowLinks'><a href='http://www.myvue.com/cinemas/about-vue-cinemas/cinema/hartlepool'>Go to cinema</a></div>", "markerType": 0},{"markerText": "Vue Hull Princes Quay", "lat": 53.74212, "lng": -0.33917, "infoText": "<div class='infoWindowContainer'><div class='infoWindowHeader'><h1>Vue Hull Princes Quay</h1></div><div class='infoWindowImage'><img src='' alt='' /></div><div class='infoWindowContent'><p>Princes Quay Shopping Centre<br />Princess Quay<br />Hull<br />HU1 2PQ</p><p>08712 240 240</p><p>10 screens</p></div><div class='infoWindowLinks'><a href='http://www.myvue.com/cinemas/about-vue-cinemas/cinema/hull-princes-quay'>Go to cinema</a></div>", "markerType": 0},{"markerText": "Vue Inverness", "lat": 57.48148, "lng": -4.17696, "infoText": "<div class='infoWindowContainer'><div class='infoWindowHeader'><h1>Vue Inverness</h1></div><div class='infoWindowImage'><img src='' alt='' /></div><div class='infoWindowContent'><p>Inverness Retail & Business Park<br />Eastfield Way<br />Inverness<br />IV2 7GD</p><p>08712 240 240</p><p>7 screens</p></div><div class='infoWindowLinks'><a href='http://www.myvue.com/cinemas/about-vue-cinemas/cinema/inverness'>Go to cinema</a></div>", "markerType": 0},{"markerText": "Vue Islington", "lat": 51.53446, "lng": -0.10657, "infoText": "<div class='infoWindowContainer'><div class='infoWindowHeader'><h1>Vue Islington</h1></div><div class='infoWindowImage'><img src='' alt='' /></div><div class='infoWindowContent'><p>36 Parkfield Street<br />Islington<br />London<br />N1 0PS</p><p>08712 240 240</p><p>9 screens</p></div><div class='infoWindowLinks'><a href='http://www.myvue.com/cinemas/about-vue-cinemas/cinema/islington'>Go to cinema</a></div>", "markerType": 0},{"markerText": "Vue Lancaster", "lat": 54.04942, "lng": -2.80012, "infoText": "<div class='infoWindowContainer'><div class='infoWindowHeader'><h1>Vue Lancaster</h1></div><div class='infoWindowImage'><img src='' alt='' /></div><div class='infoWindowContent'><p>Church Street<br />Lancaster<br />LA1 1LP</p><p>08712 240 240</p><p>6 screens</p></div><div class='infoWindowLinks'><a href='http://www.myvue.com/cinemas/about-vue-cinemas/cinema/lancaster'>Go to cinema</a></div>", "markerType": 0},{"markerText": "Vue Leamington Spa", "lat": 52.2890548706055, "lng": -1.5394059419632, "infoText": "<div class='infoWindowContainer'><div class='infoWindowHeader'><h1>Vue Leamington Spa</h1></div><div class='infoWindowImage'><img src='' alt='' /></div><div class='infoWindowContent'><p>Portland Place<br />Leamington Spa<br />CV32 5ET</p><p>08712 240 240</p><p>6 screens</p></div><div class='infoWindowLinks'><a href='http://www.myvue.com/cinemas/about-vue-cinemas/cinema/leamington-spa'>Go to cinema</a></div>", "markerType": 0},{"markerText": "Vue Leeds Kirkstall Road", "lat": 53.80438, "lng": -1.58334, "infoText": "<div class='infoWindowContainer'><div class='infoWindowHeader'><h1>Vue Leeds Kirkstall Road</h1></div><div class='infoWindowImage'><img src='' alt='' /></div><div class='infoWindowContent'><p>Cardigan Fields<br />Kirkstall Road<br />Leeds, Yorkshire<br />LS4 2DG</p><p>08712 240 240</p><p>9 screens</p></div><div class='infoWindowLinks'><a href='http://www.myvue.com/cinemas/about-vue-cinemas/cinema/leeds-kirkstall-road'>Go to cinema</a></div>", "markerType": 0},{"markerText": "Vue Leeds The Light", "lat": 53.80006, "lng": -1.54564, "infoText": "<div class='infoWindowContainer'><div class='infoWindowHeader'><h1>Vue Leeds The Light</h1></div><div class='infoWindowImage'><img src='' alt='' /></div><div class='infoWindowContent'><p>No. 22, The Light<br />The Headrow<br />Leeds<br />LS1 8TL</p><p>08712 240 240</p><p>13 screens</p></div><div class='infoWindowLinks'><a href='http://www.myvue.com/cinemas/about-vue-cinemas/cinema/leeds-the-light'>Go to cinema</a></div>", "markerType": 0},{"markerText": "Vue Leicester", "lat": 52.61442, "lng": -1.1868, "infoText": "<div class='infoWindowContainer'><div class='infoWindowHeader'><h1>Vue Leicester</h1></div><div class='infoWindowImage'><img src='' alt='' /></div><div class='infoWindowContent'><p>Meridian Leisure Park<br />Lubbesthorpe Way, Braunstone<br />Leicester<br />LE19 1JZ</p><p>08712 240 240</p><p>9 screens</p></div><div class='infoWindowLinks'><a href='http://www.myvue.com/cinemas/about-vue-cinemas/cinema/leicester'>Go to cinema</a></div>", "markerType": 0},{"markerText": "Vue Livingston", "lat": 55.88248, "lng": -3.51984, "infoText": "<div class='infoWindowContainer'><div class='infoWindowHeader'><h1>Vue Livingston</h1></div><div class='infoWindowImage'><img src='' alt='' /></div><div class='infoWindowContent'><p>McArthur Glen Designer Outlet<br />Almondvale Avenue<br />Livingston<br />EH54 6QX</p><p>08712 240 240</p><p>8 screens</p></div><div class='infoWindowLinks'><a href='http://www.myvue.com/cinemas/about-vue-cinemas/cinema/livingston'>Go to cinema</a></div>", "markerType": 0},{"markerText": "Vue Manchester Lowry", "lat": 53.47081, "lng": -2.29544, "infoText": "<div class='infoWindowContainer'><div class='infoWindowHeader'><h1>Vue Manchester Lowry</h1></div><div class='infoWindowImage'><img src='' alt='' /></div><div class='infoWindowContent'><p>Lowry Outlet Mall<br /> The Quays, Salford Quays<br />Salford<br />M50 3AH</p><p>08712 240 240</p><p>7 screens</p></div><div class='infoWindowLinks'><a href='http://www.myvue.com/cinemas/about-vue-cinemas/cinema/manchester-lowry'>Go to cinema</a></div>", "markerType": 0},{"markerText": "Vue Merthyr Tydfil", "lat": 51.74072, "lng": -3.37708, "infoText": "<div class='infoWindowContainer'><div class='infoWindowHeader'><h1>Vue Merthyr Tydfil</h1></div><div class='infoWindowImage'><img src='' alt='' /></div><div class='infoWindowContent'><p>Merthyr Tydfill Leisure Village<br />Merthyr Tydfil<br />CF48 1UT</p><p>08712 240 240</p><p>8 screens</p></div><div class='infoWindowLinks'><a href='http://www.myvue.com/cinemas/about-vue-cinemas/cinema/merthyr-tydfil'>Go to cinema</a></div>", "markerType": 0},{"markerText": "Vue Newbury", "lat": 51.40002, "lng": -1.32405, "infoText": "<div class='infoWindowContainer'><div class='infoWindowHeader'><h1>Vue Newbury</h1></div><div class='infoWindowImage'><img src='' alt='' /></div><div class='infoWindowContent'><p>The Kennet Centre<br />Newbury<br />RG14 5EN</p><p>08712 240 240</p><p>8 screens</p></div><div class='infoWindowLinks'><a href='http://www.myvue.com/cinemas/about-vue-cinemas/cinema/newbury'>Go to cinema</a></div>", "markerType": 0},{"markerText": "Vue Newcastle-under-Lyme", "lat": 53.00948, "lng": -2.22575, "infoText": "<div class='infoWindowContainer'><div class='infoWindowHeader'><h1>Vue Newcastle-under-Lyme</h1></div><div class='infoWindowImage'><img src='' alt='' /></div><div class='infoWindowContent'><p>The Square, Market Arcade<br />High Street<br />Newcastle-under-Lyme<br />ST5 1PT</p><p>08712 240 240</p><p>8 screens</p></div><div class='infoWindowLinks'><a href='http://www.myvue.com/cinemas/about-vue-cinemas/cinema/newcastle-under-lyme'>Go to cinema</a></div>", "markerType": 0},{"markerText": "Vue North Finchley", "lat": 51.60393, "lng": -0.17309, "infoText": "<div class='infoWindowContainer'><div class='infoWindowHeader'><h1>Vue North Finchley</h1></div><div class='infoWindowImage'><img src='' alt='' /></div><div class='infoWindowContent'><p>Great North Leisure Park<br />Chaplin Square<br />London<br />N12 0GL</p><p>08712 240 240</p><p>8 screens</p></div><div class='infoWindowLinks'><a href='http://www.myvue.com/cinemas/about-vue-cinemas/cinema/north-finchley'>Go to cinema</a></div>", "markerType": 0},{"markerText": "Vue Northampton", "lat": 52.23794, "lng": -0.90266, "infoText": "<div class='infoWindowContainer'><div class='infoWindowHeader'><h1>Vue Northampton</h1></div><div class='infoWindowImage'><img src='' alt='' /></div><div class='infoWindowContent'><p>Sol Central<br />Doddridge Street<br />Northampton<br />NN1 2RN</p><p>08712 240 240</p><p>10 screens</p></div><div class='infoWindowLinks'><a href='http://www.myvue.com/cinemas/about-vue-cinemas/cinema/northampton'>Go to cinema</a></div>", "markerType": 0},{"markerText": "Vue Norwich", "lat": 52.62664, "lng": 1.29592, "infoText": "<div class='infoWindowContainer'><div class='infoWindowHeader'><h1>Vue Norwich</h1></div><div class='infoWindowImage'><img src='' alt='' /></div><div class='infoWindowContent'><p>Castle Mall<br />Norwich<br />NR1 3DD</p><p>08712 240 240</p><p>8 screens</p></div><div class='infoWindowLinks'><a href='http://www.myvue.com/cinemas/about-vue-cinemas/cinema/norwich'>Go to cinema</a></div>", "markerType": 0},{"markerText": "Vue Oxford", "lat": 51.71592, "lng": -1.20806, "infoText": "<div class='infoWindowContainer'><div class='infoWindowHeader'><h1>Vue Oxford</h1></div><div class='infoWindowImage'><img src='' alt='' /></div><div class='infoWindowContent'><p>Ozone Leisure Park<br />Grenoble Road<br />Oxford<br />OX4 4XP</p><p>08712 240 240</p><p>9 screens</p></div><div class='infoWindowLinks'><a href='http://www.myvue.com/cinemas/about-vue-cinemas/cinema/oxford'>Go to cinema</a></div>", "markerType": 0},{"markerText": "Vue Piccadilly", "lat": 51.5084495544434, "lng": -0.134110003709793, "infoText": "<div class='infoWindowContainer'><div class='infoWindowHeader'><h1>Vue Piccadilly</h1></div><div class='infoWindowImage'><img src='' alt='' /></div><div class='infoWindowContent'><p>19 Lower Regent Street<br />London<br />SW1Y 4LR</p><p>08712 240 240</p><p>5 screens</p></div><div class='infoWindowLinks'><a href='http://www.myvue.com/cinemas/about-vue-cinemas/cinema/piccadilly'>Go to cinema</a></div>", "markerType": 0},{"markerText": "Vue Plymouth", "lat": 50.36705, "lng": -4.12537, "infoText": "<div class='infoWindowContainer'><div class='infoWindowHeader'><h1>Vue Plymouth</h1></div><div class='infoWindowImage'><img src='' alt='' /></div><div class='infoWindowContent'><p>Barbican Leisure Park<br />Shapters Road, Coxside<br />Plymouth<br />PL4 0LG</p><p>08712 240 240</p><p>15 screens</p></div><div class='infoWindowLinks'><a href='http://www.myvue.com/cinemas/about-vue-cinemas/cinema/plymouth'>Go to cinema</a></div>", "markerType": 0},{"markerText": "Vue Portsmouth", "lat": 50.79453, "lng": -1.10397, "infoText": "<div class='infoWindowContainer'><div class='infoWindowHeader'><h1>Vue Portsmouth</h1></div><div class='infoWindowImage'><img src='' alt='' /></div><div class='infoWindowContent'><p>Gunwharf Quays<br />Portsmouth<br />PO1 3TA</p><p>08712 240 240</p><p>14 screens</p></div><div class='infoWindowLinks'><a href='http://www.myvue.com/cinemas/about-vue-cinemas/cinema/portsmouth'>Go to cinema</a></div>", "markerType": 0},{"markerText": "Vue Preston", "lat": 53.74874, "lng": -2.67922, "infoText": "<div class='infoWindowContainer'><div class='infoWindowHeader'><h1>Vue Preston</h1></div><div class='infoWindowImage'><img src='' alt='' /></div><div class='infoWindowContent'><p>The Capitol Centre, London Way<br />Walton-Le-Dale,  Preston<br />Lancashire<br />PR5 4AW</p><p>08712 240 240</p><p>7 screens</p></div><div class='infoWindowLinks'><a href='http://www.myvue.com/cinemas/about-vue-cinemas/cinema/preston'>Go to cinema</a></div>", "markerType": 0},{"markerText": "Vue Reading", "lat": 51.45364, "lng": -0.9713, "infoText": "<div class='infoWindowContainer'><div class='infoWindowHeader'><h1>Vue Reading</h1></div><div class='infoWindowImage'><img src='' alt='' /></div><div class='infoWindowContent'><p>The Oracle Centre<br />Off Mill Lane North<br />Reading<br />RG1 2AG</p><p>08712 240 240</p><p>10 screens</p></div><div class='infoWindowLinks'><a href='http://www.myvue.com/cinemas/about-vue-cinemas/cinema/reading'>Go to cinema</a></div>", "markerType": 0},{"markerText": "Vue Redditch", "lat": 52.3060607910156, "lng": -1.94365131855011, "infoText": "<div class='infoWindowContainer'><div class='infoWindowHeader'><h1>Vue Redditch</h1></div><div class='infoWindowImage'><img src='' alt='' /></div><div class='infoWindowContent'><p>Unit 1 Leisure Level<br />Kingfisher Centre<br />Redditch<br />B97 4EQ</p><p>08712 240 240</p><p>7 screens</p></div><div class='infoWindowLinks'><a href='http://www.myvue.com/cinemas/about-vue-cinemas/cinema/redditch'>Go to cinema</a></div>", "markerType": 0},{"markerText": "Vue Rhyl", "lat": 53.3216590881348, "lng": -3.49530506134033, "infoText": "<div class='infoWindowContainer'><div class='infoWindowHeader'><h1>Vue Rhyl</h1></div><div class='infoWindowImage'><img src='' alt='' /></div><div class='infoWindowContent'><p>The Village<br />West Parade<br />Rhyl<br />LL18 1HB</p><p>08712 240 240</p><p>5 screens</p></div><div class='infoWindowLinks'><a href='http://www.myvue.com/cinemas/about-vue-cinemas/cinema/rhyl'>Go to cinema</a></div>", "markerType": 0},{"markerText": "Vue Romford", "lat": 51.57623, "lng": 0.18058, "infoText": "<div class='infoWindowContainer'><div class='infoWindowHeader'><h1>Vue Romford</h1></div><div class='infoWindowImage'><img src='' alt='' /></div><div class='infoWindowContent'><p>1-15 The Brewery<br />Romford<br />Essex<br />RM1 1AU</p><p>08712 240 240</p><p>16 screens</p></div><div class='infoWindowLinks'><a href='http://www.myvue.com/cinemas/about-vue-cinemas/cinema/romford'>Go to cinema</a></div>", "markerType": 0},{"markerText": "Vue Scunthorpe", "lat": 53.59094, "lng": -0.64482, "infoText": "<div class='infoWindowContainer'><div class='infoWindowHeader'><h1>Vue Scunthorpe</h1></div><div class='infoWindowImage'><img src='' alt='' /></div><div class='infoWindowContent'><p>1 Fenton Street<br />Scunthorpe<br />DN15 6QX</p><p>08712 240 240</p><p>7 screens</p></div><div class='infoWindowLinks'><a href='http://www.myvue.com/cinemas/about-vue-cinemas/cinema/scunthorpe'>Go to cinema</a></div>", "markerType": 0},{"markerText": "Vue Sheffield", "lat": 53.41306, "lng": -1.41246, "infoText": "<div class='infoWindowContainer'><div class='infoWindowHeader'><h1>Vue Sheffield</h1></div><div class='infoWindowImage'><img src='' alt='' /></div><div class='infoWindowContent'><p>Meadowhall Centre<br />Sheffield<br />S9 1EP</p><p>08712 240 240</p><p>11 screens</p></div><div class='infoWindowLinks'><a href='http://www.myvue.com/cinemas/about-vue-cinemas/cinema/sheffield'>Go to cinema</a></div>", "markerType": 0},{"markerText": "Vue Shepherds Bush", "lat": 51.50376, "lng": -0.21877, "infoText": "<div class='infoWindowContainer'><div class='infoWindowHeader'><h1>Vue Shepherds Bush</h1></div><div class='infoWindowImage'><img src='' alt='' /></div><div class='infoWindowContent'><p>West 12 Shopping and Leisure Centre<br />Shepherds Bush Green<br />London<br />W12 8PP</p><p>08712 240 240</p><p>12 screens</p></div><div class='infoWindowLinks'><a href='http://www.myvue.com/cinemas/about-vue-cinemas/cinema/shepherds-bush'>Go to cinema</a></div>", "markerType": 0},{"markerText": "Vue Southport", "lat": 53.65409, "lng": -3.01146, "infoText": "<div class='infoWindowContainer'><div class='infoWindowHeader'><h1>Vue Southport</h1></div><div class='infoWindowImage'><img src='' alt='' /></div><div class='infoWindowContent'><p>Ocean Plaza<br />Marine Drive<br />Southport<br />PR8 1SQ</p><p>08712 240 240</p><p>7 screens</p></div><div class='infoWindowLinks'><a href='http://www.myvue.com/cinemas/about-vue-cinemas/cinema/southport'>Go to cinema</a></div>", "markerType": 0},{"markerText": "Vue Staines", "lat": 51.43433, "lng": -0.51236, "infoText": "<div class='infoWindowContainer'><div class='infoWindowHeader'><h1>Vue Staines</h1></div><div class='infoWindowImage'><img src='' alt='' /></div><div class='infoWindowContent'><p>Two Rivers<br />Mustard Mill Road<br />Staines<br />TW18 4BL</p><p>08712 240 240</p><p>10 screens</p></div><div class='infoWindowLinks'><a href='http://www.myvue.com/cinemas/about-vue-cinemas/cinema/staines'>Go to cinema</a></div>", "markerType": 0},{"markerText": "Vue Stirling", "lat": 56.11772, "lng": -3.93023, "infoText": "<div class='infoWindowContainer'><div class='infoWindowHeader'><h1>Vue Stirling</h1></div><div class='infoWindowImage'><img src='' alt='' /></div><div class='infoWindowContent'><p>Forthside Way<br />Stirling<br />FK8 1QZ</p><p>08712 240 240</p><p>8 screens</p></div><div class='infoWindowLinks'><a href='http://www.myvue.com/cinemas/about-vue-cinemas/cinema/stirling'>Go to cinema</a></div>", "markerType": 0},{"markerText": "Vue Stroud", "lat": 51.746395111084, "lng": -2.2179319858551, "infoText": "<div class='infoWindowContainer'><div class='infoWindowHeader'><h1>Vue Stroud</h1></div><div class='infoWindowImage'><img src='' alt='' /></div><div class='infoWindowContent'><p>Merrywalks Centre<br />19-20 Merrywalks<br />Stroud<br />GL5 1RY</p><p>08712 240 240</p><p>6 screens</p></div><div class='infoWindowLinks'><a href='http://www.myvue.com/cinemas/about-vue-cinemas/cinema/stroud'>Go to cinema</a></div>", "markerType": 0},{"markerText": "Vue Swansea", "lat": 51.61809, "lng": -3.93933, "infoText": "<div class='infoWindowContainer'><div class='infoWindowHeader'><h1>Vue Swansea</h1></div><div class='infoWindowImage'><img src='' alt='' /></div><div class='infoWindowContent'><p>York Street<br />Swansea<br />SA1 3LZ</p><p>08712 240 240</p><p>12 screens</p></div><div class='infoWindowLinks'><a href='http://www.myvue.com/cinemas/about-vue-cinemas/cinema/swansea'>Go to cinema</a></div>", "markerType": 0},{"markerText": "Vue Thurrock", "lat": 51.48783, "lng": 0.28091, "infoText": "<div class='infoWindowContainer'><div class='infoWindowHeader'><h1>Vue Thurrock</h1></div><div class='infoWindowImage'><img src='' alt='' /></div><div class='infoWindowContent'><p>Lakeside Shopping Centre<br />West Thurrock<br />Essex<br />RM20 2ZW</p><p>08712 240 240</p><p>9 screens</p></div><div class='infoWindowLinks'><a href='http://www.myvue.com/cinemas/about-vue-cinemas/cinema/thurrock'>Go to cinema</a></div>", "markerType": 0},{"markerText": "Vue Torbay", "lat": 50.435302734375, "lng": -3.55931997299194, "infoText": "<div class='infoWindowContainer'><div class='infoWindowHeader'><h1>Vue Torbay</h1></div><div class='infoWindowImage'><img src='' alt='' /></div><div class='infoWindowContent'><p>The Esplanade<br />Paignton<br />TQ4 6AG</p><p>08712 240 240</p><p>9 screens</p></div><div class='infoWindowLinks'><a href='http://www.myvue.com/cinemas/about-vue-cinemas/cinema/torbay'>Go to cinema</a></div>", "markerType": 0},{"markerText": "Vue Watford", "lat": 51.69264, "lng": -0.39449, "infoText": "<div class='infoWindowContainer'><div class='infoWindowHeader'><h1>Vue Watford</h1></div><div class='infoWindowImage'><img src='' alt='' /></div><div class='infoWindowContent'><p>Woodside Leisure Park<br /> North Orbital Road, Garston<br />Hertfordshire<br />WD25 7JZ</p><p>08712 240 240</p><p>8 screens</p></div><div class='infoWindowLinks'><a href='http://www.myvue.com/cinemas/about-vue-cinemas/cinema/watford'>Go to cinema</a></div>", "markerType": 0},{"markerText": "Vue West End (Leicester Square)", "lat": 51.51152, "lng": -0.12953, "infoText": "<div class='infoWindowContainer'><div class='infoWindowHeader'><h1>Vue West End (Leicester Square)</h1></div><div class='infoWindowImage'><img src='' alt='' /></div><div class='infoWindowContent'><p>3 Cranbourn Street<br />Leicester Square<br />London<br />WC2H 7AL</p><p>08712 240 240</p><p>9 screens</p></div><div class='infoWindowLinks'><a href='http://www.myvue.com/cinemas/about-vue-cinemas/cinema/west-end-leicester-square'>Go to cinema</a></div>", "markerType": 0},{"markerText": "Vue Westfield London", "lat": 51.507447, "lng": -0.220016, "infoText": "<div class='infoWindowContainer'><div class='infoWindowHeader'><h1>Vue Westfield London</h1></div><div class='infoWindowImage'><img src='' alt='' /></div><div class='infoWindowContent'><p>Westfield Shopping Town<br />White City<br />London<br />W12 7GF</p><p>08712 240 240</p><p>14 screens</p></div><div class='infoWindowLinks'><a href='http://www.myvue.com/cinemas/about-vue-cinemas/cinema/westfield'>Go to cinema</a></div>", "markerType": 0},{"markerText": "Vue Westfield Stratford City", "lat": 51.542872, "lng": -0.007671, "infoText": "<div class='infoWindowContainer'><div class='infoWindowHeader'><h1>Vue Westfield Stratford City</h1></div><div class='infoWindowImage'><img src='' alt='' /></div><div class='infoWindowContent'><p>2 Stratford Place<br />Stratford<br />London<br />E20 1EJ</p><p>08712 240 240</p><p>17 screens</p></div><div class='infoWindowLinks'><a href='http://www.myvue.com/cinemas/about-vue-cinemas/cinema/stratford'>Go to cinema</a></div>", "markerType": 0},{"markerText": "Vue Westwood Cross, Thanet", "lat": 51.35695, "lng": 1.39335, "infoText": "<div class='infoWindowContainer'><div class='infoWindowHeader'><h1>Vue Westwood Cross, Thanet</h1></div><div class='infoWindowImage'><img src='' alt='' /></div><div class='infoWindowContent'><p>Westwood Cross<br />Thanet<br />Kent<br />CT10 2BF</p><p>08712 240 240</p><p>10 screens</p></div><div class='infoWindowLinks'><a href='http://www.myvue.com/cinemas/about-vue-cinemas/cinema/westwood-cross-thanet'>Go to cinema</a></div>", "markerType": 0},{"markerText": "Vue Wood Green", "lat": 51.59696, "lng": -0.10866, "infoText": "<div class='infoWindowContainer'><div class='infoWindowHeader'><h1>Vue Wood Green</h1></div><div class='infoWindowImage'><img src='' alt='' /></div><div class='infoWindowContent'><p>Hollywood Green, 180 High Road<br />Wood Green<br />London<br />N22 6EJ</p><p>08712 240 240</p><p>6 screens</p></div><div class='infoWindowLinks'><a href='http://www.myvue.com/cinemas/about-vue-cinemas/cinema/wood-green'>Go to cinema</a></div>", "markerType": 0},{"markerText": "Vue Worcester", "lat": 52.18938, "lng": -2.21859, "infoText": "<div class='infoWindowContainer'><div class='infoWindowHeader'><h1>Vue Worcester</h1></div><div class='infoWindowImage'><img src='' alt='' /></div><div class='infoWindowContent'><p>49 - 55 Friar Street<br />Worcester<br />WR1 2NA</p><p>08712 240 240</p><p>6 screens</p></div><div class='infoWindowLinks'><a href='http://www.myvue.com/cinemas/about-vue-cinemas/cinema/worcester'>Go to cinema</a></div>", "markerType": 0},{"markerText": "Vue York", "lat": 53.99051, "lng": -1.10202, "infoText": "<div class='infoWindowContainer'><div class='infoWindowHeader'><h1>Vue York</h1></div><div class='infoWindowImage'><img src='' alt='' /></div><div class='infoWindowContent'><p>Clifton Moor Centre<br />Stirling Road<br />York, North Yorkshire<br />YO30 4XY</p><p>08712 240 240</p><p>12 screens</p></div><div class='infoWindowLinks'><a href='http://www.myvue.com/cinemas/about-vue-cinemas/cinema/york'>Go to cinema</a></div>", "markerType": 0}]
            VeuCinemaList = []
            for VeuCinema in VeuCinemaParse:
                try:
                    cinema = {}
                    cinema['name'] = VeuCinema["markerText"]
                    cinema['name'] = cinema['name'].strip()
                    cinema['url'] = BeautifulSoup(VeuCinema["infoText"]).find("div", class_="infoWindowLinks").a["href"]
                    cinema['type'] = 'veu'
                    cinema['movies'] = []
                    cinema['location'] = {"lat":VeuCinema["lat"], "lng":VeuCinema["lng"]}
                    cinema['price'] = {}
                    VeuCinemaList.append(cinema)
                except:
                    pass

            return VeuCinemaList

        # ------------------------

        CinemaList = parseOdeon() + parseCineWorld() + parseVue()
        # CinemaList = parseVue()
        print("Finished Web Requests")

        for cinema in CinemaList:
            cinemas.insert({"name":cinema['name'].replace("'","''"), 
                "info_url":cinema['url'], 
                "type":cinema['type'], 
                "movies":[], 
                "location":{}, 
                "price": {}, 
                "price_url": ''})

        print("Cinema DB Built")

        # logging.debug(json.dumps(CinemaList))


    @staticmethod
    def getMovies():
        # logging.basicConfig(filename='getMovies.log',level=logging.DEBUG)
        Movies = [] # name-1, img-2, rank-3

        for item in latestmovies.find():
            movie = {}
            movie['name'] = item['name']
            movie['img'] = item['img_url']
            movie['rank'] = item['rank']
            Movies.append(movie)

        # logging.debug(Movies)
        return Movies

